

ALTER VIEW [dbo].[V_ANY_FUNDING]
as
(
	SELECT cc.*,CONVERT(datetime,CONVERT(varchar(12), nc.INPUT_DATETIME))  as STATUS_DATE,nc.AMOUNT as COLLECTED_AMT, nc.VAT, nc.COMMISION, nc.POSTAGE_CHARGE, nc.INSTRUMENT_EXP, 
	cl.ACC_NO,cl.ACC_NAME,cl.MAIL_ADD,cl.CITIANY_CHARGE,cl.CITIANY_STD_CHARGE,cl.CITIANY_VAT,l.LOCATION_NAME,
	b.BANK_NAME AS DRAWEE_BANK,br.BRANCH_NAME as DRAWEE_BRANCH
	FROM CCHECK cc
	INNER JOIN CCHECKTOTAL ct
	ON cc.D_CODE=ct.D_CODE
	INNER JOIN NCOLLECTION nc
	ON nc.NONZONE_REF=cc.NONZONE_REF
	LEFT OUTER JOIN CLIENT cl
	ON cc.CLIENT_CODE=cl.CLIENT_CODE
	LEFT OUTER JOIN LOCATION l
	ON l.LOCATION_CODE=cc.DLOCATION_CODE
	LEFT OUTER JOIN BANK b
	ON b.BANK_CODE=cc.DRAWEE_BANK_CODE
	LEFT OUTER JOIN BRANCH br
	ON br.BRANCH_CODE=cc.BRANCH_CODE AND br.BANK_CODE=cc.DRAWEE_BANK_CODE
	AND br.LOCATION_CODE=cc.LOCATION_CODE
	WHERE cc.RTN_STATUS='P' AND ct.[STATUS]='L'
)


GO



ALTER view [dbo].[V_REVERSAL]      
AS    
(
	SELECT r.REF_NO, r.AMOUNT, r.VALUE_DATE, r.FILENAME, r.REV_DATE, 
		r.DEPOSIT_TYPE, r.ACC_NO,  
		r.FLEXGEN_DATE,c.ACC_NAME
		FROM REVERSAL_HIST r
		LEFT OUTER JOIN CLIENT c
		ON r.CLIENT_CODE=c.CLIENT_CODE
)

GO






